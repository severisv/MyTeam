@using System.Security.Policy
@using Microsoft.EntityFrameworkCore.Metadata.Internal
@using MyTeam.Resources
@model MyTeam.ViewModels.Fine.IndexViewModel

@{ 
    ViewBag.Title = "Botoversikt";
}
<div class="mt-main fine">
    <div class="mt-container">
        <ul class="nav nav-pills mt-justified">
            <li class="active"><a asp-action="index" asp-controller="fine" asp-route-status=""><i class="fa fa-bar-chart"></i>&nbsp;Oversikt</a></li>
            <li class=""><a asp-action="list" asp-controller="fine"><i class="@Icons.Fine"></i>&nbsp;Alle bøter</a></li>
            <li class=""><a asp-action="index" asp-controller="remedyrate"><i class="fa fa-usd"></i>&nbsp;Bøtesatser</a></li>
        </ul>
    </div>
    <div class="mt-container">
        @if (Model.Years.Count() > 1)
            {
            <div class="pull-right">
                <select class="linkSelect form-control pull-right hidden-md hidden-lg">
                    @foreach (var year in Model.Years)
                {
                        <option value="@Url.Action("index", "Fine", new {aar = Model.SelectedYear })" selected="@(Model.SelectedYear == year)">@year</option>
                    }
                </select>
            </div>
        }
        <h3 class="pull-left">Total:&nbsp;&nbsp;&nbsp;&nbsp;<span class="green">@Model.TotalSum,-</span></h3>
        <table class="listMembers tablesorter table col-xs-12">
            <thead>
                <tr>
                    <th class="nosort"></th>
                    <th>Navn</th>
                    <th class="text-center"><i class="fa fa-money"></i><span class="hidden-xs">&nbsp;&nbsp;Utestående</span></th>
                    <th class="text-center"><i class="fa fa-money"></i><span class="hidden-xs">&nbsp;&nbsp;Total</span></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var player in Model.FineSummaries)
                {
                    <tr>
                        <td class="image">
                            <a asp-controller="player" asp-action="show" asp-route-playerid="@player.MemberId">
                                <img src="@Context.Cloudinary().MemberImage(player.PlayerImage, player.FacebookId, 50, 50)" />
                            </a>
                        </td>
                        <td>
                            <a asp-controller="player" asp-action="show" asp-route-playerid="@player.MemberId">
                                @player.Name
                            </a>
                        </td>
                        <td class="text-center red">
                            @if (player.Due > 0){<span>@player.Due,-</span>}
                        </td>
                        <td class="text-right">
                            @player.Total,-
                        </td>
                    </tr>

                }
            </tbody>
        </table>
    </div>
</div>


@if (Model.Years.Count() > 1)
{
    <div class="mt-sidebar">
        <div class="mt-container">
            <ul class="nav nav-list">
                <li class="nav-header">@Res.Season.Pluralize()</li>
                @foreach (var year in Model.Years)
                {
                    <li><a class="@(Model.SelectedYear == year ? "active" : "")" asp-controller="fine" asp-action="index" asp-route-aar="@year">@year</a></li>
                }
            </ul>

        </div>
    </div>
}