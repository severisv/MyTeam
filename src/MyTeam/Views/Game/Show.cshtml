@using System.Threading.Tasks
@using MyTeam
@using MyTeam.Models.Shared
@model MyTeam.ViewModels.Game.ShowGameViewModel
@{
    ViewBag.Title = $"{Model.Game.HomeTeam} - {Model.Game.AwayTeam}";
}

<div class="mt-main">
    <div class="mt-container">
        @if (Context.UserIsInRole(Roles.Admin, Roles.Coach))
        {
            if (Model.Game.HasPassed())
            {
                <a asp-action="registerresult" asp-route-gameId="@Model.Game.Id" class="btn btn-default pull-right" title="Registrer resultat"><i class="flaticon-goal"></i></a>
            }
            else
            {
                <a asp-action="edit" asp-controller="event" asp-route-eventId="@Model.Game.Id" class="edit-link pull-right" title="@Res.Edit"><i class="fa fa-edit"></i></a>
            }
        }
        <h3 class="game-header">@Model.Game.HomeTeam <span class="game-score">@Model.Game.HomeScore - @Model.Game.AwayScore</span> @Model.Game.AwayTeam</h3>
        <hr />
        <div class="row">
            <div class="col-sm-6">
                <p class="col-sm-4 col-xs-2">
                    <i class="fa fa-13x fa-calendar pull-right"></i>
                </p>
                <p class="col-sm-8">@Model.Game.DateTime.ToNoFull()</p>
                <p class="col-sm-4 col-xs-2">
                    <i class="fa fa-13x fa-clock-o pull-right"></i>
                </p>
                <p class="col-sm-8">@Model.Game.DateTime.ToNoTime()</p>
            </div>
            <div class="col-sm-6">
                <p class="col-sm-4 col-xs-2">
                    <i class="@Icons.GameType(Model.Game.GameType) pull-right"></i>
                </p>
                <p class="col-sm-8">@Model.Game.GameType</p>
                <p class="col-sm-4 col-xs-2">
                    <i class="fa fa-13x fa-map-marker pull-right"></i>
                </p>
                <p class="col-sm-8">@Model.Game.Location</p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1">
                <div id="game-showEvents"
                     data-get-players-url="@Url.Action("GetSquad", "GameApi", new {gameId = Model.Game.Id})"
                     data-get-gameeventtypes-url="@Url.Action("GetTypes", "GameEventApi")"
                     data-get-gameevents-url="@Url.Action("Get", "GameEventApi", new {gameId = Model.Game.Id})">
            </div>
        </div>
    </div>
</div>
<div class="mt-sidebar">


</div>

@section Scripts
{
    <script src="~/scripts/Game/show.js"></script>
}
