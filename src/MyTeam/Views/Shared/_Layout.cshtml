@using System.Threading.Tasks
@using MyTeam
@{
    var club = Context.GetClub();
}
<!DOCTYPE html>
<html lang="nb-no">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta title="@(ViewBag.Title != null ? $"{club?.ShortName} - " : $"{club?.Name}")@ViewBag.Title"/>
    @if (ViewBag.MetaDescription != null)
    {
        <meta name="description" content="@ViewBag.MetaDescription">
    }
    <title>@club?.Name@(ViewBag.Title != null ? " - " : "")@ViewBag.Title</title>
    <link rel="icon" type="image/png" href="@Context.Cloudinary().Image(club?.Favicon ?? club?.Logo)">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/style.css?v=2" />
    <link rel="stylesheet" href="~/lib/Font-Awesome/css/font-awesome.css"/>
    <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-69971219-1', 'auto');
          ga('send', 'pageview');

    </script>
</head>
<body>
<div id="bg-placeholder"></div>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a asp-controller="news" asp-action="index" class="navbar-brand"><img src="@Context.Cloudinary().Image(club?.Logo, 100)" alt="Wam-Kam"/></a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a asp-controller="news" asp-action="index" >@Res.Home</a></li>
                <li><a asp-controller="player" asp-action="list">@Res.Players</a></li>
                <li><a asp-controller="game" asp-action="index" asp-route-aar="">@Res.Games</a></li>
                <li><a asp-controller="table" asp-action="index" asp-route-aar="">@Res.Table</a></li>
                <li><a asp-controller="stats" asp-action="index" asp-route-aar="">@Res.Stats</a></li>
                @if (Context.UserIsMember())
                {
                    <li><a class="slide-down-parent hidden-xs" data-submenu="#submenu-internal" href="javascript:void(0)">@Res.Internal <i class="fa fa-angle-down"></i></a></li>

                }
            </ul>
        @if (Context.UserIsMember())
        {
            <hr class="visible-xs submenu-divider" />
            <ul class="nav navbar-nav submenu visible-xs">
                <li><a asp-controller="event" asp-action="index"><i class="@Icons.Signup"></i> @Res.Signup</a></li>
                <li><a asp-controller="attendance" asp-action="attendance"><i class="@Icons.Attendance"></i> @Res.Attendance</a></li>
                <li><a asp-controller="member" asp-action="index"><i class="@Icons.SquadList"></i> @Res.SquadList</a></li>  
            </ul>
            if (Context.UserIsInRole(Roles.Admin, Roles.Coach))
                {
                <hr class="visible-xs submenu-divider" />
                <ul class="nav navbar-nav submenu visible-xs adminMenu">
                    @Html.Partial("_CoachMenuItems")
                </ul>
                }
        }
        </div>
        <div class="navbar-topRight">
            @await Html.PartialAsync("_LoginPartial")
            @if (Context.UserIsMember())
            {
                @Html.Partial("_UserInfo", Context.Member())
                @Component.InvokeAsync("NotificationButton")
            }
        </div>

        @if (Context.UserIsMember())
        {
            <ul id="submenu-internal" class="nav navbar-nav submenu slide-down-child  hidden-xs collapse">
                <li><a asp-controller="event" asp-action="index"><i class="@Icons.Signup"></i> @Res.Signup</a></li>
                <li><a asp-controller="attendance" asp-action="attendance"><i class="@Icons.Attendance"></i> @Res.Attendance</a></li>
                <li><a asp-controller="member" asp-action="index"><i class="@Icons.SquadList"></i> @Res.SquadList</a></li>
                @if (Context.UserIsInRole(Roles.Admin, Roles.Coach))
                {
                    <li><a asp-controller="admin" asp-action="index"><i class="@Icons.Coach"></i> @Res.AdminPage</a></li>
                }
            </ul>
        }
    </div>
</div>
@Component.InvokeAsync("PageHeader", new { headline = ViewBag.PageName ?? ViewBag.Title ?? "", content = ViewBag.Subtext ?? "" }})
<div id="main-container" class="container">
    <div id="alerts" class="col-lg-9 col-md-9">
        @Html.Partial("_Alerts")
    </div>
    <div class="clearfix"></div>
    @RenderBody()
    <footer></footer>
</div>
<script src="~/scripts/bundles/lib.bundle.js"></script>
<script src="~/scripts/bundles/site.bundle.js"></script>
@RenderSection("scripts", required: false)
<script>console.log('Server side: @Context.Elapsed()ms');</script>
</body>
</html>